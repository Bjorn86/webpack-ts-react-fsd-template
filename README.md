# Template проекта на Webpack с TS и методологией FSD

## Оглавление

- [Дополнительная информация](#дополнительная-информация)
  - [Библиотеки](#библиотеки)
  - [Работа с коммитами](#работа-с-коммитами)
  - [Git hooks](#git-hooks)
  - [Прочая информация](#прочая-информация)
- [Сценарии запуска](#сценарии-запуска)
- [Автор](#автор)

## Дополнительная информация

### Библиотеки

- Стили
  - Для обработки файлов стилей в качестве препроцессора используется Sass/SCSS
  - В качестве постпроцессора PostCSS
  - Для работы со стилями предлагается подход CSS Modules
  - Для работы с динамическими стилями или множеством модулей имеется зависимость classnames
- Роутинг
  - В проекте уже имеется зависимость React Router. При необходимости она может быть удалена, с удалением соответствующего провайдера в `app/providers`
- Тестирование
  - В качестве библиотек для тестирования в проекте используются Jest и React Testing Library. Запуск тестов интегрирован в pre-push сценарий, подробнее см. ниже
- Линтинг
  - В проекте уже имеется зависимость ESLint а также несколько других плагинов расширяющих правила линтинга
  - Также написаны кастомные правила линтинга, включая правила по соблюдению иерархии слоёв FSD и возможности импорта сущностей с одного слоя в другой. Подробнее см. `config/eslint`
  - Запуска линтинга с возможность исправления интегрирован в pre-commit сценарий, подробнее си. ниже

### Работа с коммитами

Для работы с коммитами в проект предусмотрены зависимости commitizen, commitlint, и lint-staged.

Чтобы создать новый коммит с помощью commitizen, используйте команду `npm run commit` или `cz` если commitizen у вас установлен глобально.

Вы также можете использовать знакомые вам команды `git commit -m 'message'` или `git commit`, а также интерфейс IDE для создания коммита, но:

- в случае использования `git commit` вы минуете интерфейс commitizen, и после отработки сценариев lint-staged, вам откроется стандартный редактор сообщения коммита
- в случае использования `git commit -m 'message'` вы минуете и интерфейс commitizen, и стандартный редактор сообщения коммита
- в случае использования интерфейса IDE, вы минуете и интерфейс commitizen, а также в терминале у вас не будет никакого вывода, для того чтобы понять как проходит коммит вы можете переключиться на вкладку "Выходные данные", раздел "Git"

Не один из описанных выше сценариев не позволит вам избежать проверки сообщения коммита на валидность. Конфиг commitlint находиться в корне - `commitlint.config.cts`. Конфиг commitizen находиться в `config/commitizen`

### Git hooks

Для работы с Git hooks в проекте имеется зависимость Husky. В проекте используются два хука:

- pre-commit - запускает последовательность команд определённых в конфиге lint-staged - `config/lint-staged`, а именно запуск линтера в режиме исправления, проверки типов, и Prettier
- pre-push - запускает последовательность команд определённых в хуке - `.husky/pre-push`, а именно запуск линтера, проверки типов, тестов. **Внимание**, запуск тестов по умолчанию закомментирован, чтобы не вызывать ошибки в отсутствии тестов. После написания первых тестов рекомендуется раскомментировать данную строку

### Прочая информация

- Названия файлов и директорий проекта пишутся только в kebab-case, только в нижнем регистре. Это оградит вас от проблем с разным регистром букв в различных ОС и последующих заморочек с Git
- При запуске проекта создаётся переменная окружения `__MODE__` которая может иметь значения `development` или `production`, и может быть использована для включения/отключения той или иной функциональности. Например при создании Redux Store:

  ```typescript
  export const setupStore = (preloadedState?: Partial<RootState>) => {
    return configureStore({
      reducer: rootReducer,
      middleware: (getDefaultMiddleware) => getDefaultMiddleware().concat(),
      devTools: __MODE__ !== 'production',
      preloadedState,
    });
  };
  ```

- Настроить окружение под себя можно в файле `.env`. Интерфейс описан в файле `src/environment.d.ts`. Например:

  ```plaintext
  // .env

  AUTO_OPEN = "{ "app": { "name": "chrome", "arguments":["--auto-open-devtools-for-tabs"] } }"
  ```

  Указанный выше параметр позволит при запуске скрипта `npm start` в случае если у вас в качестве ОС установлен Windows запускать браузер Chrome в режиме разработчика.

  Или:

  ```plaintext
  // .env

  AUTO_OPEN = false
  ```

  Указанный выше параметр позволит при запуске скрипта `npm start` позволит вообще не открывать браузер.

## Сценарии запуска

- `npm start` - режим разработки с запуском локального сервера
- `npm run commit` - запуск commitizen для коммита
- `npm run lint` - запуск линтера
- `npm run lint:fix` - запуск линтера в режиме исправления
- `npm run format` - запуск Prettier
- `npm run build:dev` - сборка бандла в режиме разработки
- `npm run build:prod` - сборка бандла в режиме продакшена (для служебных сценариев)
- `npm run build` - сборка бандла в режиме продакшена
- `npm run analyze` - запуск webpack-bundle-analyzer для анализа бандла
- `npm run typecheck` - запуск проверки типов
- `npm run test` - запуск Jest
- `npm run test:coverage` - запуск Jest в режиме покрытия
- `npm run prepare` - инициализация Husky (выполняется автоматически, единожды, при первичной установке зависимостей)

## Автор

**Данила Легкобытов**

- e-mail: [legkobytov-danila@yandex.ru](mailto:legkobytov-danila@yandex.ru)
- LinkedIn: [in/danila-legkobytov](https://www.linkedin.com/in/danila-legkobytov/)
- Telegram: [@danila_legkobytov](https://t.me/danila_legkobytov)
- Frontend Mentor: [@danila_legkobytov](https://www.frontendmentor.io/profile/Bjorn86)
